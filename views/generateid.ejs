<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/styles/global.css" />
  <title>Register Student</title>
</head>
<body>
  <%- include('./partials/header.ejs') %>
  <div class="admin-container">
    <%- include('./partials/navigation.ejs') %>
    <main class="section">
      <div class="container center-container">
        <div class="form-container">
          <div class="form-header">
            <h2>Create Student Profile</h2>
          </div>
          <form action="/passport" method="post" enctype="multipart/form-data" id="studentForm" novalidate>
            <div class="form-group">
              <label for="userName">Full Name</label>
              <input
                type="text"
                id="userName"
                name="userName"
                placeholder="Last, First and Middle Name"
                required
                autocomplete="off"
              />
              <span class="error-message"></span>
            </div>

            <div class="form-group">
              <label for="studentId">Student ID</label>
              <input
                type="text"
                id="studentId"
                name="studentId"
                placeholder="Auto-generated"
                readonly
                required
              />
            </div>

            <div class="form-group">
              <label for="addmissionNo">Admission Number</label>
              <input
                type="text"
                id="addmissionNo"
                name="addmissionNo"
                placeholder="Admission Number"
                autocomplete="off"
              />
              <span class="error-message"></span>
            </div>

            <div class="form-group">
              <label for="dob">Date of Birth</label>
              <input type="date" id="dob" name="dob" required />
              <span class="error-message"></span>
            </div>

            <div class="form-group">
              <label for="class">Class</label>
              <select name="class" id="class" required>
                <option value="">Select Class</option>
                <option>SS 3</option>
                <option>SS 2</option>
                <option>SS 1</option>
                <option>JSS 3</option>
                <option>JSS 2</option>
                <option>JSS 1</option>
                <option>BASIC 6</option>
                <option>BASIC 5</option>
                <option>BASIC 4</option>
                <option>BASIC 3</option>
                <option>BASIC 2</option>
                <option>BASIC 1</option>
                <option>NURSERY 3</option>
                <option>NURSERY 2</option>
                <option>NURSERY 1</option>
                <option>PRE-NURSERY</option>
              </select>
              <span class="error-message"></span>
            </div>

            <div class="form-group">
              <label for="schoolsession">Academic Session</label>
              <select name="schoolsession" id="schoolsession" required>
                <option value="">Select Session</option>
                <option>2024-2025</option>
                <option>2025-2026</option>
                <option>2026-2027</option>
                <option>2027-2028</option>
                <option>2028-2029</option>
                <option>2029-2030</option>
              </select>
              <span class="error-message"></span>
            </div>

            <fieldset class="form-group gender">
              <legend>Gender</legend>
              <label><input type="radio" value="MALE" name="gender" required /> Male</label>
              <label><input type="radio" value="FEMALE" name="gender" /> Female</label>
              <span class="error-message"></span>
            </fieldset>

            <div class="form-group">
              <label for="passport">Passport Photo</label>
              <input type="file" id="passport" name="passport" accept="image/*" />
              <span class="error-message"></span>
            </div>

            <button type="submit" class="button">Register Student</button>
          </form>
        </div>
      </div>
    </main>
  </div>

  <script src="/js/menu.js"></script>
  <script src="/js/studentId.js"></script>
  <script>
    // Basic form validation
    document.getElementById('studentForm').addEventListener('submit', function(e) {
      const form = e.target;
      let isValid = true;
      const inputs = form.querySelectorAll('input[required], select[required]');
      
      inputs.forEach(input => {
        const errorMessage = input.nextElementSibling;
        if (!input.value.trim()) {
          isValid = false;
          errorMessage.textContent = 'This field is required';
          input.classList.add('error');
        } else {
          errorMessage.textContent = '';
          input.classList.remove('error');
        }
      });

      const gender = form.querySelector('input[name="gender"]:checked');
      const genderError = form.querySelector('.gender .error-message');
      if (!gender) {
        isValid = false;
        genderError.textContent = 'Please select a gender';
      } else {
        genderError.textContent = '';
      }

      if (!isValid) {
        e.preventDefault();
      }
    });
  </script>
</body>
</html>